manifest {
    name            = 'IDENTXX/wf-metabarcoding-generic-v2'
    author          = 'IDENTXX'
    homePage        = 'https://github.com/IDENTXX/wf-metabarcoding-generic-v2'
    description     = 'Generic Metabarcoding'
    mainScript      = 'main.nf'
    nextflowVersion = '>=23.04.2'
    version         = 'v1.0.13'
}

params {
    reads          = ''
    out_dir        = 'output'
    db_choice      = 'oomycetes_cox'
    custom_db_path = ''
    min_identity   = 90
    min_coverage   = 80
    // Standard EPI2ME Parameter
    help = false
    version = false
    monochrome_logs = false
    validate_params = true
    show_hidden_params = false
    schema_ignore_params = 'show_hidden_params,validate_params,monochrome_logs'
}

process {
    container = 'identxx/fusarium-toolbox:v1.0'
    cpus   = 4
    memory = '4 GB'
    errorStrategy = 'finish'
    
    withName: 'MAKEBLASTDB|BLASTN' {
        // Wir nutzen den offiziellen Blast-Container
        container = 'ncbi/blast:2.16.0'
    }
}

profiles {
    standard {
        docker {
            enabled = true
            // Minimale Optionen für maximale Stabilität nach dem Update
            runOptions = '--user "$(id -u):$(id -g)"' 
        }
    }
}